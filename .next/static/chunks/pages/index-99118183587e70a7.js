(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(96724)}])},37131:function(e,t,n){"use strict";var r=n(85893),s=n(25675),a=n(63801),i=n(63153),l=n(33299),o=n(11163),c=n(2804),u=n(30377);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){s=!0,a=o}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.Z=function(){var e=(0,l.useSession)().data,t=(0,o.useRouter)(),n=d((0,c.FV)(u.e),2),m=n[0],f=n[1],x=function(){t.push("/")};return(0,r.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b shadow",children:(0,r.jsxs)("section",{className:"flex items-center justify-between max-w-6xl mx-5 lg:mx-auto",children:[(0,r.jsx)("aside",{onClick:x,className:"relative hidden w-24 h-16 cursor-pointer lg:inline-grid",children:(0,r.jsx)(s.default,{src:"/assets/Instagram_logo.svg",layout:"fill",objectFit:"contain"})}),(0,r.jsx)("aside",{onClick:x,className:"relative flex-shrink-0 block w-10 h-10 cursor-pointer lg:hidden",children:(0,r.jsx)(s.default,{src:"/assets/insta-icon.webp",layout:"fill",objectFit:"contain"})}),(0,r.jsx)("aside",{className:"hidden max-w-xs sm:block",children:(0,r.jsxs)("div",{className:"relative flex items-center p-3 rounded-md",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 flex items-center pl-3 pointer-events-none",children:(0,r.jsx)(a.W1M,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsx)("input",{type:"text",className:"block w-full pl-10 border-gray-300 rounded-md bg-gray-50 sm:text-sm border-gray focus:ring-black focus:border-black",placeholder:"search..."})]})}),(0,r.jsxs)("aside",{className:"flex items-center justify-end space-x-4",children:[(0,r.jsx)(i.tvw,{onClick:x,className:"navBtns"}),(0,r.jsx)(a.Oqj,{className:"w-10 h-6 cursor-pointer md:hidden"}),e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative navBtns",children:[(0,r.jsx)(a.Rdq,{className:"rotate-45 navBtns"}),(0,r.jsx)("div",{className:"absolute flex items-center justify-center w-5 h-5 text-xs text-white bg-red-500 rounded-full -top-2 -right-1 animate-pulse",children:"5"})]}),(0,r.jsx)(i.wl8,{onClick:function(){return f(!m)},className:"navBtns"}),(0,r.jsx)(a.vxs,{className:"navBtns"}),(0,r.jsx)(a.h_8,{className:"text-red-700 navBtns"}),(0,r.jsx)("img",{src:e.user.image,className:"object-cover h-10 my-3 transition-all duration-200 ease-out rounded-full cursor-pointer sm:my-0 hover:scale-95",loading:"lazy",alt:"user"})]}):(0,r.jsx)("button",{onClick:l.signIn,className:"px-3 py-1 text-sm font-semibold text-white bg-blue-600 rounded-full animate-pulse",children:"sign in"})]})]})})}},30377:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var r=(0,n(2804).cn)({key:"modalState",default:!1})},96724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(85893),s=n(9008),a=n(33299),i=function(){var e,t,n,s=(0,a.useSession)().data;return(0,r.jsx)("div",{children:s?(0,r.jsxs)("div",{className:"flex items-center justify-between ml-10 mt-14",children:[(0,r.jsx)("img",{src:(null===s||void 0===s||null===(e=s.user)||void 0===e?void 0:e.image)||"/assets/user.png",className:"rounded-full cursor-pointer border p-[2px] w-16 h-16",alt:null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.name}),(0,r.jsxs)("div",{className:"flex-1 mx-4",children:[(0,r.jsx)("h2",{className:"font-bold cursor-pointer",children:null===(n=s.user)||void 0===n?void 0:n.username}),(0,r.jsx)("h3",{className:"text-sm text-gray-400",children:"Welcome to Instagram"})]}),(0,r.jsx)("button",{onClick:s?a.signOut:a.signIn,className:"px-3 py-1 text-sm font-semibold text-white bg-red-600 rounded-full",children:"logout"})]}):(0,r.jsx)(r.Fragment,{})})},l=n(67294),o=n(85384),c=n.n(o),u=function(e){var t=e.name,n=e.avatar,s=e.info;return(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsx)("img",{src:n,className:"w-10 h-10 cursor-pointer rounded-full border p-[2px]",alt:t}),(0,r.jsxs)("div",{className:"flex-1 ml-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold cursor-pointer",children:t}),(0,r.jsxs)("h3",{className:"text-xs text-gray-500 truncate ",children:["Works at ",(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:s})]})]}),(0,r.jsx)("button",{className:"px-3 py-1 text-sm font-semibold text-white bg-blue-600 rounded-full ",children:"follow"})]})};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=function(){var e=(0,l.useState)([]),t=e[0],n=e[1];return(0,l.useEffect)((function(){var e=m(Array(5)).map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({id:t},c().helpers.contextualCard())}));n(e)}),[]),(0,r.jsxs)("div",{className:"mt-4 ml-10",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-5 text-sm",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"Suggestions for you"}),(0,r.jsx)("button",{className:"px-3 py-1 text-sm font-semibold text-white bg-blue-600 rounded-full",children:"See All"})]}),t.map((function(e){return(0,r.jsx)(u,{avatar:e.avatar,name:e.name,info:e.company.name},e.id)}))]})},x=n(35666),h=n.n(x),p=(n(76357),n(63714)),v=n(63801),b=n(63153),j=n(19),g=n(15503),y=n(96257),w=n(33404),N=((0,g.C6)().length?(0,g.Mq)():(0,g.ZF)({apiKey:"AIzaSyCNcnSCLDIVgQZ0dGZD0fZvfoRjFR59ilY",authDomain:"instagram-clone-045.firebaseapp.com",projectId:"instagram-clone-045",storageBucket:"instagram-clone-045.appspot.com",messagingSenderId:"541736815427",appId:"1:541736815427:web:58297eaa59b6d257227df6",measurementId:"G-BTQVKCHSYP"}),(0,y.ad)()),k=(0,w.cF)(),S=n(94803),C=n.n(S);function O(e,t,n,r,s,a,i){try{var l=e[a](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){O(a,r,s,i,l,"next",e)}function l(e){O(a,r,s,i,l,"throw",e)}i(void 0)}))}}var E=function(e){var t,n=e.id,s=e.timestamp,i=e.image,o=e.avatar,c=e.name,u=e.caption,d=(0,l.useRef)(null),m=(0,a.useSession)().data,f=(0,l.useState)([]),x=f[0],g=f[1],y=(0,l.useState)(""),w=y[0],k=y[1],S=(0,l.useState)(!1),O=S[0],E=S[1],I=(0,l.useState)([]),P=I[0],_=I[1],F=(0,l.useState)(!1),T=F[0],R=F[1],B=(0,l.useState)(!1),D=B[0],J=B[1];O&&(t=(0,r.jsx)(p.cW,{title:"Pick your emoji\u2026",emoji:"point_up",onSelect:function(e){return k(w+e.native)}}));D&&d.current.focus(),(0,l.useEffect)((function(){return(0,j.cf)((0,j.IO)((0,j.hJ)(N,"posts",n,"comments"),(0,j.Xo)("timestamp","desc")),(function(e){g(e.docs)}))}),[N,n]),(0,l.useEffect)((function(){return(0,j.cf)((0,j.hJ)(N,"posts",n,"likes"),(function(e){_(e.docs)}))}),[N,n]),(0,l.useEffect)((function(){return R(-1!==P.findIndex((function(e){var t;return e.id===(null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.uid)})))}),[P]);var V=A(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=6;break}return e.next=4,(0,j.oe)((0,j.JU)(N,"posts",n,"likes",null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.uid));case 4:e.next=8;break;case 6:return e.next=8,(0,j.pl)((0,j.JU)(N,"posts",n,"likes",m.user.uid),{username:m.user.username});case 8:case"end":return e.stop()}}),e)}))),U=A(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=w,k(""),E(!1),e.next=6,(0,j.ET)((0,j.hJ)(N,"posts",n,"comments"),{comment:r,username:m.user.username,avatar:m.user.image,timestamp:(0,j.Bt)()});case 6:case"end":return e.stop()}}),e)})));return(0,r.jsxs)("div",{className:"bg-white my-7 border-rounded-sm",children:[(0,r.jsxs)("div",{className:"flex items-center p-5",children:[(0,r.jsx)("img",{className:"object-contain w-12 h-12 p-1 mr-3 border rounded-full cursor-pointer",src:o,alt:c}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-bold cursor-pointer ",children:c}),(0,r.jsx)(C(),{className:"text-xs",fromNow:!0,children:s})]}),(0,r.jsx)(v.nWS,{className:"w-5 h-5 rounded-lg cursor-pointer focus:bg-gray-300 focus:animate-pulse "})]}),(0,r.jsx)("img",{className:"object-cover w-full",src:i,alt:u}),m&&(0,r.jsxs)("div",{className:"flex justify-between px-4 pt-4",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[T?(0,r.jsx)(b.h_8,{onClick:V,className:"text-red-600 btn"}):(0,r.jsx)(v.h_8,{onClick:V,className:"btn"}),(0,r.jsx)(v.kBi,{onClick:function(){J(!D)},className:"btn"}),(0,r.jsx)(v.Rdq,{className:"btn"})]}),(0,r.jsx)(v.plf,{className:"btn"})]}),(0,r.jsxs)("p",{className:"p-5 truncate",children:[P.length>0&&(0,r.jsxs)("span",{className:"mb-1 font-bold",children:[P.length," ",P.length>1?"likes":"like"]})," ",(0,r.jsx)("span",{className:"mr-1 font-semibold text-gray-600",children:u})]}),m&&(0,r.jsxs)("form",{className:"flex items-center p-4",children:[(0,r.jsx)(v.OdW,{onClick:function(e){e.preventDefault(),E(!O)},className:"cursor-pointer h-7 animate-bounce"}),t,(0,r.jsx)("input",{type:"text",ref:d,value:w,onChange:function(e){return k(e.target.value)},placeholder:"Add a comment...",className:"flex-1 mx-1 border-none shadow-sm outline-none focus:ring-0 "}),(0,r.jsx)("button",{type:"submit",disabled:!w.trim(),onClick:U,className:"px-3 py-1 font-semibold text-white bg-blue-600 rounded-full disabled:bg-gray-200 disabled:text-gray-600",children:"Post"})]}),x.length>0&&(0,r.jsx)("div",{className:"h-20 ml-10 overflow-y-scroll scrollbar-thumb-black scrollbar-thin",children:x.map((function(e){var t,n;return(0,r.jsxs)("div",{className:"flex items-center mb-3 space-x-2",children:[(0,r.jsx)("img",{className:"rounded-full cursor-pointer h-8 border hover:scale-95 p-[2px]",src:e.data().avatar,alt:e.comment}),(0,r.jsxs)("p",{className:"flex-1 text-sm font-semibold text-gray-500",children:[(0,r.jsx)("span",{className:"font-bold text-black cursor-pointer",children:e.data().username})," ",e.data().comment]}),(0,r.jsx)(C(),{fromNow:!0,className:"pr-5 text-xs",children:null===(t=e.data())||void 0===t||null===(n=t.timestamp)||void 0===n?void 0:n.toDate()})]},e.id)}))})]})},I=function(){var e=(0,l.useState)([]),t=e[0],n=e[1];return(0,l.useEffect)((function(){return(0,j.cf)((0,j.IO)((0,j.hJ)(N,"posts"),(0,j.Xo)("timestamp","desc")),(function(e){n(e.docs)}))}),[N]),(0,r.jsx)("div",{children:t.map((function(e){var t,n;return(0,r.jsx)(E,{id:e.id,image:e.data().image,avatar:e.data().avatar,name:e.data().username,caption:e.data().caption,timestamp:null===(t=e.data())||void 0===t||null===(n=t.timestamp)||void 0===n?void 0:n.toDate()},e.id)}))})},P=function(e){e.id;var t=e.username,n=e.avatar;return(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{className:"object-contain p-[1.5px] transition duration-200 ease-out transform rounded-full cursor-pointer w-14 h-14 hover:scale-110 border-2 border-red-600",src:n,alt:t}),(0,r.jsx)("p",{className:"text-xs text-center truncate w-14",children:t})]})};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var T=function(){var e=(0,l.useState)([]),t=e[0],n=e[1],s=(0,a.useSession)().data;return(0,l.useEffect)((function(){var e=F(Array(20)).map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({id:t},c().helpers.contextualCard())}));n(e)}),[]),(0,r.jsxs)("div",{className:"flex p-6 mt-8 space-x-2 overflow-x-scroll bg-white border-gray-200 rounded-sm scrollbar-thumb-black scrollbar-thin",children:[s&&(0,r.jsx)(P,{avatar:s.user.image,username:s.user.username}),t.map((function(e){return(0,r.jsx)(P,{id:e.id,avatar:e.avatar,username:e.username},e.id)}))]})},R=function(){var e=(0,a.useSession)().data;return(0,r.jsxs)("main",{className:"grid grid-cols-1 mx-3 md:grid-cols-2 md:max-w-3xl xl:grid-cols-3 xl:max-w-6xl lg:mx-auto ".concat(!e&&"!grid-cols-1 !max-w-3xl"),children:[(0,r.jsxs)("section",{className:"col-span-2",children:[e&&(0,r.jsx)(T,{}),(0,r.jsx)(I,{})]}),e&&(0,r.jsx)("section",{className:"hidden xl:inline-grid md:col-span-1",children:(0,r.jsxs)("section",{className:"fixed top-16",children:[(0,r.jsx)(i,{}),(0,r.jsx)(f,{})]})})]})},B=n(37131),D=n(35131),J=n(36518),V=n(2804),U=n(30377),W=n(90774);function Z(e,t,n,r,s,a,i){try{var l=e[a](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){Z(a,r,s,i,l,"next",e)}function l(e){Z(a,r,s,i,l,"throw",e)}i(void 0)}))}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){s=!0,a=o}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var X=function(){var e=(0,a.useSession)().data,t=(0,l.useRef)(null),n=(0,l.useRef)(null),s=z((0,V.FV)(U.e),2),i=s[0],o=s[1],c=(0,l.useState)(null),u=c[0],d=c[1],m=(0,l.useState)(!1),f=m[0],x=m[1],p=q(h().mark((function t(r){var s,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return x(!0),t.next=5,(0,j.ET)((0,j.hJ)(N,"posts"),{username:e.user.username,fullname:e.user.name,caption:n.current.value,avatar:e.user.image,timestamp:(0,j.Bt)()});case 5:return s=t.sent,a=(0,W.iH)(k,"posts/".concat(s.id,"/image")),t.next=9,(0,W.sf)(a,u,"data_url").then(q(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,W.Jt)(a);case 2:return n=e.sent,e.next=5,(0,j.r7)((0,j.JU)(N,"posts",s.id),{image:n});case 5:case"end":return e.stop()}}),e)}))));case 9:o(!1),x(!1),d(null);case 12:case"end":return t.stop()}}),t)})));return(0,r.jsx)(D.u.Root,{show:i,as:l.Fragment,children:(0,r.jsx)(J.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:o,children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-[800px] sm:min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)(D.u.Child,{as:l.Fragment,enter:"ease out duration-300",enterFrom:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(J.V.Overlay,{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(D.u.Child,{as:l.Fragment,enter:"ease out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,r.jsx)("div",{className:"inline-block px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6",children:(0,r.jsxs)("div",{children:[u?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 flex items-center justify-center mt-1 mr-1 text-gray-800 transition-all duration-200 bg-gray-300 rounded-full cursor-pointer hover:bg-gray-800 hover:text-white h-7 w-7",children:(0,r.jsx)(v.b0D,{className:"w-6 h-6 ",onClick:function(){return d(null)}})}),(0,r.jsx)("img",{src:u,alt:"image"})]}):(0,r.jsx)("div",{onClick:function(){return t.current.click()},className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full cursor-pointer",children:(0,r.jsx)(v.xmR,{className:"w-6 h-6 text-red-500","aria-hidden":"true"})}),(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,r.jsx)(J.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Upload a photo"}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{ref:t,type:"file",hidden:!0,onChange:function(e){var t=new FileReader;e.target.files[0]&&t.readAsDataURL(e.target.files[0]),t.onload=function(e){d(e.target.result)}}})}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("input",{ref:n,type:"text",className:"w-full text-center border-none focus:ring-0",placeholder:"Enter a caption..."})})]}),(0,r.jsx)("div",{className:"mt-5sm:mt-6",children:(0,r.jsx)("button",{onClick:p,type:"button",className:"inline-flex justify-center w-full px-4 py-2 text-base font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-0 disabled:cursor-not-allowed disabled:bg-gray-300",children:f?"uploading post":"Upload Post"})})]})})})]})})})};function G(){return(0,r.jsxs)("div",{className:"h-screen overflow-y-scroll bg-gray-50 scrollbar-hide",children:[(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:"Clone of Instagram"}),(0,r.jsx)("link",{rel:"icon",href:"https://www.instagram.com/favicon.ico"})]}),(0,r.jsx)(B.Z,{}),(0,r.jsx)(R,{}),(0,r.jsx)(X,{})]})}}},function(e){e.O(0,[774,229,885,43,16,337,796,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);